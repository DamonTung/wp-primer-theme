!function(a,b){function c(){var d=b(".current").find("img"),f=new ColorThief,g=f.getColor(d[0]),h=e("hex","rgb( "+g[0]+", "+g[1]+", "+g[2]+" )");a("hero_background_color").set(h),wp.media.frame.off("cropped",c),wp.media.frame.off("skippedcrop",c)}function d(){var c=a("color_scheme"),d=c();j||("_custom"!==d&&(i=d,b("#customize-control-color_scheme select").append(b("<option></option>").val("_custom").html(colorSchemes._custom.label)),a("color_scheme").set("_custom")),d=_.isNull(i)?"default":i);var h=_.clone(colorSchemes[d].colors),k={};_.each(h,function(b,c){var d=a(c);void 0!==d&&(d=d(),h[c]=d,k[c]=e("rgb",d))}),_.isEqual(h,colorSchemes[d].colors)&&a("color_scheme").set(d),a.previewer.send("primer-update-colors-css",f(h)),a.previewer.send("primer-update-colors-css-rgba",g(k))}function e(a,b){if("rgb"===a){hex=b.replace("#","");return parseInt(hex.substring(0,2),16)+", "+parseInt(hex.substring(2,4),16)+", "+parseInt(hex.substring(4,6),16)}var c=b.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return!(!c||4!==c.length)&&"#"+("0"+parseInt(c[1],10).toString(16)).slice(-2)+("0"+parseInt(c[2],10).toString(16)).slice(-2)+("0"+parseInt(c[3],10).toString(16)).slice(-2)}var f=wp.template("primer-colors-css"),g=wp.template("primer-colors-css-rgba"),h=[],i=null,j=!1;_.each(colorSchemes.default.colors,function(a,b){h.push(b)}),b(document).on("click","#header_image-button",function(){wp.media.frame.on("cropped",c),wp.media.frame.on("skippedcrop",c)}),a.HeaderTool.CurrentView=a.HeaderTool.CurrentView.extend({setPlaceholder:function(){b(".current").find("img").length&&0!==b(".current").find("img").width()&&c(wp.customize)}}),a.controlConstructor.select=a.Control.extend({ready:function(){if("color_scheme"!==this.id)return!1;"_custom"!==a(this.id)()&&b('#customize-control-color_scheme select option[value="_custom"]').remove(),this.setting.bind("change",function(c){"_custom"!==c&&(b('#customize-control-color_scheme select option[value="_custom"]').remove(),j=!0,_.each(colorSchemes[c].colors,function(b,c){var d=a(c);void 0!==d&&(d.set(b),a.control(c).container.find(".color-picker-hex").data("data-default-color",b).wpColorPicker("defaultColor",b))}),j=!1)})}}),_.each(h,function(b){a(b,function(a){a.bind(d)})})}(wp.customize,jQuery);