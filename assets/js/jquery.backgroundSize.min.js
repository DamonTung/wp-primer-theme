/*! backgroundSize | (c) 2012 @louis_remi | MIT license | https://github.com/louisremi/jquery.backgroundSize.js */
!function(t,e,s,i,a){var o=t("<div>")[0],n=/url\(["']?(.*?)["']?\)/,r=[],h={top:0,left:0,bottom:1,right:1,center:.5};if(!("backgroundSize"in o.style)||t.debugBGS){t.cssHooks.backgroundSize={set:function(e,s){var i,a,o,n=!t.data(e,"bgsImg");t.data(e,"bgsValue",s),n?(r.push(e),t.refreshBackgroundDimensions(e,!0),a=t("<div>").css({position:"absolute",zIndex:-1,top:0,right:0,left:0,bottom:0,overflow:"hidden"}),o=t("<img>").css({position:"absolute"}).appendTo(a),a.prependTo(e),t.data(e,"bgsImg",o[0]),i=(t.css(e,"backgroundPosition")||t.css(e,"backgroundPositionX")+" "+t.css(e,"backgroundPositionY")).split(" "),t.data(e,"bgsPos",[h[i[0]]||parseFloat(i[0])/100,h[i[1]]||parseFloat(i[1])/100]),"auto"==t.css(e,"zIndex")&&(e.style.zIndex=0),"static"==t.css(e,"position")&&(e.style.position="relative"),t.refreshBackgroundImage(e)):t.refreshBackground(e)},get:function(e){return t.data(e,"bgsValue")||""}},t.cssHooks.backgroundImage={set:function(e,s){return t.data(e,"bgsImg")?t.refreshBackgroundImage(e,s):s}},t.refreshBackgroundDimensions=function(e,s){var i=t(e),a={width:i.innerWidth(),height:i.innerHeight()},o=t.data(e,"bgsDim"),n=!o||a.width!=o.width||a.height!=o.height;t.data(e,"bgsDim",a),n&&!s&&t.refreshBackground(e)},t.refreshBackgroundImage=function(e,s){var i=t.data(e,"bgsImg"),a=(n.exec(s||t.css(e,"backgroundImage"))||[])[1],o=i&&i.src,r=a!=o;r&&(i.style.height=i.style.width="auto",i.onload=function(){var s={width:i.width,height:i.height};(1!=s.width||1!=s.height)&&(t.data(e,"bgsImgDim",s),t.data(e,"bgsConstrain",!1),t.refreshBackground(e),i.style.visibility="visible",i.onload=null)},i.style.visibility="hidden",i.src=a,(i.readyState||i.complete)&&(i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",i.src=a),e.style.backgroundImage="none")},t.refreshBackground=function(e){var s,a,o=t.data(e,"bgsValue"),n=t.data(e,"bgsDim"),r=t.data(e,"bgsImgDim"),h=t(t.data(e,"bgsImg")),d=t.data(e,"bgsPos"),g=t.data(e,"bgsConstrain"),c=n.width/n.height,u=r.width/r.height;"contain"==o?u>c?(t.data(e,"bgsConstrain",s="width"),a=i.floor((n.height-n.width/u)*d[1]),h.css({top:a}),s!=g&&h.css({width:"100%",height:"auto",left:0})):(t.data(e,"bgsConstrain",s="height"),a=i.floor((n.width-n.height*u)*d[0]),h.css({left:a}),s!=g&&h.css({height:"100%",width:"auto",top:0})):"cover"==o&&(u>c?(t.data(e,"bgsConstrain",s="height"),a=i.floor((n.height*u-n.width)*d[0]),h.css({left:-a}),s!=g&&h.css({height:"100%",width:"auto",top:0})):(t.data(e,"bgsConstrain",s="width"),a=i.floor((n.width/u-n.height)*d[1]),h.css({top:-a}),s!=g&&h.css({width:"100%",height:"auto",left:0})))};var d,g,c,u=t.event,l={_:0},f=0;d=u.special.throttledresize={setup:function(){t(this).on("resize",d.handler)},teardown:function(){t(this).off("resize",d.handler)},handler:function(e,s){var i=this,a=arguments;g=!0,c||(t(l).animate(l,{duration:1/0,step:function(){f++,(f>d.threshold&&g||s)&&(e.type="throttledresize",u.dispatch.apply(i,a),g=!1,f=0),f>9&&(t(l).stop(),c=!1,f=0)}}),c=!0)},threshold:1},t(e).on("throttledresize",function(){t(r).each(function(){t.refreshBackgroundDimensions(this)})})}}(jQuery,window,document,Math);
